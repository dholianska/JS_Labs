<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Таблиця Значень</title>
    <style>
        body { font-family: sans-serif; padding: 10px; }
        h1 { color: #333; margin-bottom: 20px; text-align: center; }
        .table-container { margin: 10px auto; width: fit-content; max-width: 95%; overflow-x: auto; }
        table { border-collapse: collapse; width: 100%; min-width: 400px; }
        th, td { border: 1px solid #999; padding: 8px; text-align: center; }
        th { background-color: #eee; font-weight: bold; }
        .sub-header { font-size: 0.8em; color: #555; }
    </style>
</head>
<body>

    <H1 id="Title"></H1>
    <div class="table-container">
        <table id="trigTable">
            </table>
    </div>

    <script>
        function getUrlParams() {
            var params = {};
            var query = window.location.search.substring(1); 
            var vars = query.split("&");

            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
            }
            return params;
        }

        function generateTable() {
            var params = getUrlParams();
            var func = params.func;
            var start = parseFloat(params.start);
            var end = parseFloat(params.end);
            var step = parseFloat(params.step);

            var titleElement = document.getElementById('Title');
            var tableRef = document.getElementById('trigTable');

            if (!func || isNaN(start) || isNaN(end) || isNaN(step)) {
                titleElement.innerHTML = "Помилка: Некоректні вхідні дані.";
                return;
            }

            var funcName = (func === 'tan') ? 'Тангенс (tg)' : (func === 'sin' ? 'Синус (sin)' : 'Косинус (cos)');
            titleElement.innerHTML = "Таблиця значень функції " + funcName;
            
            var headerRow1 = tableRef.insertRow();
            var th_angle = headerRow1.insertCell(0);
            th_angle.innerHTML = "Кут";
            th_angle.colSpan = 2;
            var th_func = headerRow1.insertCell(1);
            th_func.innerHTML = func;

            var headerRow2 = tableRef.insertRow();
            headerRow2.insertCell(0).innerHTML = "<div class='sub-header'>в градусах</div>";
            headerRow2.insertCell(1).innerHTML = "<div class='sub-header'>в радіанах</div>";
            headerRow2.insertCell(2).innerHTML = "<div class='sub-header'>&nbsp;</div>";

            var currentRow = start;
            var rowIndex = 2; 

            while (currentRow <= end + 1e-6) {
                var newRow = tableRef.insertRow(rowIndex++);
                var degrees = currentRow;
                var radians = degrees * (Math.PI / 180);
                var value;

                switch (func) {
                    case 'sin':
                        value = Math.sin(radians);
                        break;
                    case 'cos':
                        value = Math.cos(radians);
                        break;
                    case 'tan':
                        if (Math.abs(Math.cos(radians)) < 1e-6) {
                            value = "±∞"; 
                        } else {
                             value = Math.tan(radians);
                        }
                        break;
                }

                newRow.insertCell(0).innerHTML = degrees.toFixed(2).replace('.', ','); 
                newRow.insertCell(1).innerHTML = radians.toFixed(4).replace('.', ','); 
                
                var valueCell = newRow.insertCell(2);
                if (typeof value === 'number') {
                    valueCell.innerHTML = value.toFixed(4).replace('.', ','); 
                } else {
                    valueCell.innerHTML = value; 
                }

                currentRow += step;
            }
        }

        generateTable();
    </script>
</body>
</html>